<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dear Putri</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --pink:#f8a8d8; --hot:#d63384;
  }
  body{
    margin:0; font-family:'Poppins',sans-serif;
    background:linear-gradient(135deg,#ffe4ec,#e0d4ff,#d0f0ff);
    overflow:hidden;
  }
  .page{min-height:100vh;display:none;align-items:center;justify-content:center;flex-direction:column;text-align:center;}
  .page.show{display:flex;}
  .card{
    width:92%;max-width:460px;aspect-ratio:1/1.2;background:rgba(255,255,255,.92);
    border:4px solid var(--pink);border-radius:24px;box-shadow:0 8px 30px rgba(0,0,0,.12);
    display:flex;flex-direction:column;align-items:center;text-align:center;
    padding:16px;position:relative;color:var(--hot);
  }
  input.pin{font-size:20px;padding:8px 12px;border:2px solid var(--pink);border-radius:12px;text-align:center;outline:none}
  button{
    margin-top:14px;padding:10px 20px;border:none;border-radius:12px;
    background:var(--pink);color:#fff;font-size:16px;cursor:pointer;transition:all .3s
  }
  button:hover{background:var(--hot);transform:scale(1.05)}
  .title{font-size:24px;font-weight:700;color:var(--hot);margin-bottom:8px;padding:6px 12px;border-bottom:2px dashed var(--pink)}
  .text{flex:1;overflow-y:auto;white-space:pre-line;line-height:1.55;font-size:15px;padding:6px}
  .emoji-corner{position:absolute;right:12px;bottom:8px;font-size:24px}
  .controls{margin-top:18px;display:flex;gap:18px}
  .dot{width:10px;height:10px;border-radius:50%;background:#f8c8e8;margin:0 3px;display:inline-block}
  .dot.active{background:var(--hot)}
  .decor{position:absolute;font-size:20px;animation:float 6s linear infinite;opacity:.75;pointer-events:none}
  @keyframes float{from{transform:translateY(-40px);opacity:0}to{transform:translateY(100vh);opacity:1}}

  /* üéµ Musik button */
  .music-btn{position:absolute;top:10px;right:12px;background:var(--pink);color:#fff;
    border:none;border-radius:50%;width:42px;height:42px;font-size:18px;cursor:pointer;transition:.3s}
  .music-btn.playing{background:var(--hot);}

  /* üêº Panda + ekspresi */
  .panda {
    width:120px;height:120px;background:#fff;border-radius:50%;
    border:4px solid #000;position:relative;margin:20px auto;cursor:pointer;
    transition:transform .6s ease;
  }
  .panda .ear{width:30px;height:30px;background:#000;border-radius:50%;position:absolute;top:-15px;}
  .panda .ear.left{left:10px}
  .panda .ear.right{right:10px}

  .panda .eye{width:28px;height:36px;background:#000;border-radius:50%;position:absolute;top:35px;}
  .panda .eye.left{left:25px}
  .panda .eye.right{right:25px}
  .panda .eye::after{content:"";width:12px;height:12px;background:#fff;border-radius:50%;position:absolute;top:8px;left:8px;}

  .panda .nose{width:20px;height:15px;background:#000;border-radius:50%;position:absolute;top:70px;left:calc(50% - 10px)}
  .panda .mouth{
    width:40px;height:20px;border-bottom:3px solid #000;border-radius:0 0 40px 40px;
    position:absolute;top:85px;left:calc(50% - 20px);transition:all .25s ease;
  }

  /* üòÅ Senyum */
  .panda.smile .mouth{border-bottom:5px solid #000;height:25px}
  /* üò≤ Kaget */
  .panda.surprised .mouth{border:none;width:22px;height:22px;border-radius:50%;background:#000;top:78px;left:calc(50% - 11px)}
  .panda.surprised .eye{width:34px;height:40px}
  /* ü•∞ Malu (pipi pink) */
  .panda.shy::before,.panda.shy::after{
    content:"";position:absolute;bottom:20px;width:20px;height:12px;background:pink;border-radius:50%;
  }
  .panda.shy::before{left:15px} .panda.shy::after{right:15px}

  /* ü§ó Popup Pelukan */
  .hug-popup{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);align-items:center;justify-content:center;z-index:999;}
  .hug-box{
    background:#fff;padding:30px 50px;border-radius:20px;font-size:22px;font-weight:600;color:var(--hot);
    animation:hugAnim 1s ease-in-out infinite alternate; box-shadow:0 10px 30px rgba(0,0,0,.2);
  }
  @keyframes hugAnim{from{transform:scale(1)}to{transform:scale(1.18)}}

  /* kecilkan sedikit di layar sangat kecil */
  @media (max-width:360px){
    .card{max-width:420px}
    .panda{transform:scale(.9)}
  }
</style>
</head>
<body>
  <!-- Page 1: PIN -->
  <div id="page1" class="page show">
    <div class="card">
      <h2>Masukkan PIN</h2>
      <input id="pinInput" class="pin" type="password" maxlength="6" placeholder="****" />
      <button onclick="checkPin()">Cek PIN</button>
      <button id="playBtn" onclick="playAndNext()" style="display:none;margin-top:20px;">Putar Musik & Masuk</button>
    </div>
  </div>

  <!-- Page 2: Panda interaktif -->
  <div id="page2" class="page">
    <div class="card" style="position:relative;padding-bottom:60px;">
      <button class="music-btn" onclick="toggleMusic(music1,this)">‚ñ∂</button>
      <h2 style="font-size:22px;font-weight:700;color:#d63384;margin-bottom:10px;">Diary Putri</h2>
      <p style="font-size:15px;line-height:1.6;margin:0 0 14px 0;">
        aku takut suratnya udah susah di baca jadi aku buat backup<br/>dalam bentuk web yang bisa kamu scan
      </p>

      <!-- üêº Panda -->
      <div id="panda" class="panda" onclick="movePanda()">
        <div class="ear left"></div><div class="ear right"></div>
        <div class="eye left"></div><div class="eye right"></div>
        <div class="nose"></div><div class="mouth"></div>
      </div>

      <button onclick="goToPage3()" style="position:absolute;bottom:12px;left:12px;background:#f8a8d8;font-size:15px;">Lanjut ‚ûú</button>
      <p style="position:absolute;bottom:16px;right:16px;font-size:13px;color:#555;margin:0;">23-08-2025 Tasikmalaya</p>
    </div>
  </div>

  <!-- Page 3: Carousel Surat -->
  <div id="page3" class="page">
    <div class="card">
      <button class="music-btn" onclick="toggleMusic(music2,this)">‚ñ∂</button>
      <div class="title">Dear Putri</div>
      <div id="cardText" class="text"></div>
      <div id="emojiCorner" class="emoji-corner">üíñ</div>
    </div>
    <div class="controls">
      <button onclick="prev()">‚ü®</button>
      <button onclick="next()">‚ü©</button>
    </div>
    <div id="dots"></div>
  </div>

  <!-- Popup Pelukan -->
  <div id="hugPopup" class="hug-popup"><div class="hug-box">ü§ó Peluk dari jauh ü§ó</div></div>

  <!-- Musik -->
  <audio id="music1" preload="auto" loop><source src="lagu2.mp3" type="audio/mpeg"/></audio>
  <audio id="music2" preload="auto" loop><source src="lagu.mp3" type="audio/mpeg"/></audio>

<script>
/* === PIN gate === */
const correctPin="1326";
function checkPin(){
  const val=document.getElementById("pinInput").value.trim();
  if(val===correctPin){
    document.getElementById("playBtn").style.display="inline-block";
    alert("PIN benar! Klik 'Putar Musik & Masuk'.");
  }else{
    alert("PIN salah, coba lagi ya üíï");
    document.getElementById("playBtn").style.display="none";
  }
}
function playAndNext(){
  music1.play().catch(()=>{console.log("Autoplay ditolak (normal), user sudah klik tombol ini jadi harusnya jalan.");});
  switchPage(2);
}

/* === Page switch === */
function switchPage(n){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("show"));
  document.getElementById("page"+n).classList.add("show");
}

/* === Musik === */
const music1=document.getElementById("music1");
const music2=document.getElementById("music2");
function stopMusic1(){music1.pause();music1.currentTime=0;}
function playMusic2(){music2.play().catch(()=>{});}
function toggleMusic(audio,btn){
  if(audio.paused){audio.play().catch(()=>{});btn.textContent="‚è∏";btn.classList.add("playing");}
  else{audio.pause();btn.textContent="‚ñ∂";btn.classList.remove("playing");}
}
function goToPage3(){stopMusic1();playMusic2();switchPage(3);}

/* === Panda interaktif + ekspresi === */
let pandaClicks=0;
function movePanda(){
  const panda=document.getElementById("panda");
  pandaClicks++;

  // ubah ekspresi sesuai klik
  if(pandaClicks===1){
    panda.classList.add("smile");
  }else if(pandaClicks===2){
    panda.classList.remove("smile");
    panda.classList.add("surprised");
  }else if(pandaClicks===3){
    panda.classList.remove("surprised");
    panda.classList.add("shy");
  }

  // lompat ke posisi random (kecil agar tetap di dalam kartu)
  const x=(Math.random()*120-60);
  const y=(Math.random()*120-60);
  panda.style.transform=`translate(${x}px,${y}px)`;

  // setelah klik ke-3, munculkan popup pelukan lalu reset
  if(pandaClicks===3){
    const popup=document.getElementById("hugPopup");
    popup.style.display="flex";
    setTimeout(()=>{
      popup.style.display="none";
      pandaClicks=0;
      panda.classList.remove("shy");
      panda.style.transform="translate(0,0)";
    },2500);
  }
}

/* === Teks Surat (dari DOCX, sudah dirapikan) === */
const fullText = `Tasikmalaya 21 agustus 2025

Permisi ini aku Aga (Naufal), aku tau kamu ga suka baca, tapi kalau kamu luang tolong baca surat yang aku buat ini yaa..

Niat aku ngasih surprise ini: aku pengen kamu bisa nginget hal-hal yang baik di kota ini dan semoga kamu seneng selama momen-momen itu. Aku minta maaf untuk hal-hal yang bikin kamu ga nyaman dll. Ini bakal kamu baca aku ga tau kapan; yang pasti aku tau ini bakal ada di tangan kamu. Entah kapan pun itu, semoga kamu bisa terima ini dengan keadaan yang baik-baik aja. Hope u enjoy reading the letter.

Aku mau ucapin makasih, karena berkat kamu juga aku jadi lebih dewasa dalam hal apa pun itu.

Aku juga berterimakasih khususnya ke kamu karena udah bikin momen yang seru dan memorable buat aku. Aku ga bisa bales semua kebaikan kamu; aku cuma bisa berharap kamu bisa ngejar cita-cita kamu dan bisa pamerin ke aku di masa depan.

Aku tau mungkin ini ga buat kamu seneng atau bikin kamu amaze‚Äîaku minta maaf untuk itu. Aku juga sedih kalau sampe surat ini kamu terima pas aku udah ada di luar Tasik. Tapi ini langkah terakhir aku buat ngeyakinin kamu supaya kamu ngejar cita-cita kamu. Aku juga bakal ngejar cita-cita aku sampe kita berdua bisa ketemu lagi di masa depan. Aku bener-bener berharap hari itu kita bakal bener-bener bisa bahagia buat ketemu lagi.

Aneh rasanya aku ngasih surat ini; rasanya kayak surat terakhir dari aku. Tapi kita ga tau apa yang bakal kita hadapin di depan nanti. Tapi aku pengen kita bisa ngebuat cita-cita itu jadi hal yang mungkin.

Aku percaya kamu pasti bisa buat ngejar cita-cita itu. Aku dukung 100%. Tapi aku pengen di saat itu juga kamu dalam keadaan sehat dan masih bisa tersenyum untuk menandakan bahwa kamu senang.

Di akhir surat ini, aku bangga sama apa yang kamu laluin. Aku bangga sama diri kamu yang selalu percaya diri. Aku bangga sama kamu. Maka dari itu aku pengen kamu selalu ngejaga itu, termasuk senyuman kamu‚Äîsemoga nanti aku bisa liat lagi pas kita udah sama-sama bisa ngegapai apa yang kita harapin sekarang.

Terima kasih kepada Putri Nigntyas Gunawan. GG kamu baca semua yaa hahaha

-Aga`;

/* === Bagi ke slide & render === */
function chunkSmart(text,maxLen=260){
  const words=text.split(" ");
  const slides=[];let buf="";
  for(const w of words){
    if((buf+" "+w).length>maxLen){slides.push(buf.trim());buf=w;}
    else{buf+=(buf?" ":"")+w;}
  }
  if(buf.trim())slides.push(buf.trim());
  return slides;
}
const chunks=chunkSmart(fullText,260);
let page=0;
const cardText=document.getElementById("cardText");
const dots=document.getElementById("dots");
const emojiCorner=document.getElementById("emojiCorner");
const emojis=['üíñ','üå∏','üê∞','‚ú®','üçì','üê±','ü¶Ñ','üíê','üåà','ü™Ω','ü´∂','üéÄ','‚≠ê','ü•∞'];

function render(){
  cardText.textContent=chunks[page];
  dots.innerHTML=chunks.map((_,i)=>`<span class="dot ${i===page?'active':''}"></span>`).join("");
  emojiCorner.textContent=emojis[Math.floor(Math.random()*emojis.length)];
}
function prev(){page=(page-1+chunks.length)%chunks.length;render();}
function next(){page=(page+1)%chunks.length;render();}
render();

/* === Dekorasi jatuh === */
setInterval(()=>{
  const el=document.createElement("div");
  el.className="decor";
  el.textContent=Math.random()>0.5?'‚ú®':'üíñ';
  el.style.left=(Math.random()*window.innerWidth)+'px';
  el.style.top='-20px';
  el.style.animationDuration=(4+Math.random()*6)+'s';
  document.body.appendChild(el);
  setTimeout(()=>el.remove(),10000);
},900);
</script>
</body>
</html>
